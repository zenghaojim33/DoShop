//
//  CommodityViewController.m
//  Dome
//
//  Created by BTW on 14/12/23.
//  Copyright (c) 2014年 jenk. All rights reserved.
//

#import "CommodityViewController.h"
#import "CommodityTableViewCell.h"


#import "FSLineChart.h"
#import "UIColor+FSPalette.h"
@interface CommodityViewController ()
<
UITableViewDataSource,
UITableViewDelegate
>
{
    int index;
    NSArray * dateArray;
}
@property (weak, nonatomic) IBOutlet UIButton *Button1;
@property (weak, nonatomic) IBOutlet UIButton *Button2;
@property (weak, nonatomic) IBOutlet UIButton *Button3;
@property (weak, nonatomic) IBOutlet UITableView *MyTableView;
@property (weak, nonatomic) IBOutlet UIView *LineView;
@property (strong,nonatomic)FSLineChart* lineChart;


@end

@implementation CommodityViewController
-(void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    [self.navigationController setNavigationBarHidden:NO animated:YES];
    
    self.title = @"销售管理";
    UIBarButtonItem *backItem = [[UIBarButtonItem alloc] init];
    backItem.title = @"";
    
    self.navigationItem.backBarButtonItem = backItem;
    
}
- (IBAction)TouchButton:(UIButton *)sender
{

    [self.Button1 setBackgroundColor:[UIColor whiteColor]];
    [self.Button1 setTitleColor:[UIColor scrollViewTexturedBackgroundColor] forState:UIControlStateNormal];
    
    [self.Button2 setBackgroundColor:[UIColor whiteColor]];
    [self.Button2 setTitleColor:[UIColor scrollViewTexturedBackgroundColor] forState:UIControlStateNormal];
    
    [self.Button3 setBackgroundColor:[UIColor whiteColor]];
    [self.Button3 setTitleColor:[UIColor scrollViewTexturedBackgroundColor] forState:UIControlStateNormal];
    
    [sender setBackgroundColor:[UIColor colorWithRed:227/255.0 green:116/255.0 blue:110/255.0 alpha:1]];
    [sender setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
    
    [self InItLineChart];
    
    index =  sender.tag;
    
    [self.MyTableView reloadData];
}
- (void)viewDidLoad {
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    
      index = 1;
    dateArray = [[NSArray alloc]initWithObjects:
                 @"31",
                 @"30",
                 @"29",
                 @"28",
                 @"27",
                 @"26",
                 @"25",
                 @"24",
                 @"23",
                 @"22",
                 @"21",
                 @"20",
                 @"19",
                 @"18",
                 @"17",
                 @"16",
                 @"15",
                 @"14",
                 @"13",
                 @"12",
                 @"11",
                 @"10",
                 @"09",
                 @"08",
                 @"07",
                 @"06",
                 @"05",
                 @"04",
                 @"03",
                 @"02",
                 @"01", nil];
    
     [self InItLineChart];
    self.MyTableView.delegate = self;
    self.MyTableView.dataSource = self;
    [self.MyTableView registerNib:[UINib nibWithNibName:@"CommodityTableViewCell" bundle:nil] forCellReuseIdentifier:@"Cell"];
    [self.MyTableView reloadData];
   

  

}
- (void)InItLineChart
{
    NSMutableArray* chartData = [NSMutableArray arrayWithCapacity:10];
    
    for(int i=0;i<10;i++) {
        chartData[i] = [NSNumber numberWithInt:rand() % 100];
    }
  
    
    [self.lineChart removeFromSuperview];
    // Creating the line chart
    self.lineChart = [[FSLineChart alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width-32, self.LineView.frame.size.height)];
    
    self.lineChart.gridStep = 1;
    
    self.lineChart.labelForIndex = ^(NSUInteger item) {
        //        return [NSString stringWithFormat:@"%lu",(unsigned long)item];
        return @"";
    };
    
    self.lineChart.labelForValue = ^(CGFloat value) {
        //        return [NSString stringWithFormat:@"%.f", value];
        return @"";
    };
    
    [self.lineChart setChartData:chartData];

    [self.LineView addSubview:self.lineChart];

}
#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 31;
}


- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    
    
    
    static NSString *CellIdentifier = @"Cell" ;
    
    
    CommodityTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    NSString * date = [dateArray objectAtIndex:indexPath.row];
    cell.date.text = [NSString stringWithFormat:@"2014-01-%@",date];

    
    switch (index) {
        case 1:
            cell.label.text = @"合计:             单";
            cell.number.text = @"2";
            break;
        case 2:
            cell.label.text = @"合计:             元";
            cell.number.text = @"700";
            break;
        default:
            cell.label.text = @"合计:             位";
            cell.number.text = @"40";
            break;
    }
    
    cell.selectionStyle = UITableViewCellAccessoryNone;
//    cell.layer.shadowColor = [UIColor blackColor].CGColor;
//    cell.layer.shadowOffset = CGSizeMake(1, 1);
//    cell.layer.shadowOpacity = 0.2;
    return cell;
}
- (CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 42;
}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

/*
#pragma mark - Navigation

// In a storyboard-based application, you will often want to do a little preparation before navigation
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    // Get the new view controller using [segue destinationViewController].
    // Pass the selected object to the new view controller.
}
*/

@end
